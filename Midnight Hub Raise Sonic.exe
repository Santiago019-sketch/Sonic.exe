local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

-- Create main window
local Window = OrionLib:MakeWindow({
    Name = "Midnight Hub | Raise a Sonic", 
    HidePremium = false,
    SaveConfig = false,
    ConfigFolder = "MidnightHub"
})

-- Get services and player
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- Create main tab
local FarmTab = Window:MakeTab({
    Name = "Farming",
    Icon = "rbxassetid://4483345998"
})

-- Create globals
_G.autoClick = false
_G.autoCollect = false
_G.autoBuy = false
_G.autoRent = false
_G.autoPetClick = false
_G.clickDelay = 0.1

-- Auto Click
FarmTab:AddToggle({
    Name = "Auto Click",
    Default = false,
    Flag = "autoClick",
    Save = true,
    Callback = function(bool)
        _G.autoClick = bool
        if bool then
            while _G.autoClick and wait(_G.clickDelay) do
                pcall(function()
                    if workspace:FindFirstChild("Sonic") and workspace.Sonic:FindFirstChild("Sonic") then
                        fireclickdetector(workspace.Sonic.Sonic.ClickDetector)
                    end
                end)
            end
        end
    end
})

-- Auto Click Pets
FarmTab:AddToggle({
    Name = "Auto Click Pets",
    Default = false,
    Flag = "autoPetClick",
    Save = true,
    Callback = function(bool)
        _G.autoPetClick = bool
        if bool then
            while _G.autoPetClick and wait(_G.clickDelay) do
                pcall(function()
                    -- Click all pets in the workspace
                    for _, pet in pairs(workspace:GetChildren()) do
                        if pet:IsA("Model") and pet:FindFirstChild("ClickDetector") then
                            fireclickdetector(pet.ClickDetector)
                        end
                    end
                end)
            end
        end
    end
})

-- Auto Collect
FarmTab:AddToggle({
    Name = "Auto Collect",
    Default = false,
    Flag = "autoCollect",
    Save = true,
    Callback = function(bool)
        _G.autoCollect = bool
        if bool then
            while _G.autoCollect and wait(_G.clickDelay) do
                pcall(function()
                    for _,v in pairs(workspace:GetDescendants()) do
                        if v.Name == "Ring" then
                            firetouchinterest(LocalPlayer.Character.Head, v, 0)
                            wait()
                            firetouchinterest(LocalPlayer.Character.Head, v, 1)
                        end
                    end
                end)
            end
        end
    end
})

-- Auto Buy Food
FarmTab:AddToggle({
    Name = "Auto Buy Food",
    Default = false,
    Flag = "autoBuy",
    Save = true,
    Callback = function(bool)
        _G.autoBuy = bool
        if bool then
            while _G.autoBuy and wait(1) do
                pcall(function()
                    if workspace:FindFirstChild("Food") and not workspace.Food.Full.Value then
                        ReplicatedStorage.Buy:FireServer("Sonic Food")
                    end
                end)
            end
        end
    end
})

-- Auto Get Rent
FarmTab:AddToggle({
    Name = "Auto Get Rent",
    Default = false,
    Flag = "autoRent",
    Save = true,
    Callback = function(bool)
        _G.autoRent = bool
        if bool then
            while _G.autoRent and wait(1) do
                pcall(function()
                    if ReplicatedStorage.CanGetRent.Value and ReplicatedStorage.SonicEXE.Value then
                        ReplicatedStorage.RentEvent:FireServer("Get")
                    end
                end)
            end
        end
    end
})

-- Click Delay
FarmTab:AddTextbox({
    Name = "Click Delay",
    Default = "0.1",
    TextDisappear = false,
    Callback = function(value)
        _G.clickDelay = tonumber(value) or 0.1
    end
})

-- Credits tab
local CreditsTab = Window:MakeTab({
    Name = "Credits",
    Icon = "rbxassetid://6961018885"
})

CreditsTab:AddLabel("Made by Midnight Team")
CreditsTab:AddButton({
    Name = "Copy Discord",
    Callback = function()
        setclipboard("discord.gg/midnighthub")
    end
})

-- Initialize library
OrionLib:Init()

-- Set speed
if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
    LocalPlayer.Character.Humanoid.WalkSpeed = 50
end

-- Anti AFK
for i,v in pairs(getconnections(LocalPlayer.Idled)) do
    v:Disable()
end
